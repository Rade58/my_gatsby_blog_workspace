# DA ODMAH NAPOMENEM DA SAM U OVOM SLUCAJU IPAK ODLUCIO DA KORISTIM CLOUDINARY KAKO BI HANDLE-OVAO SLIKE

[CLOUDINARY](https://cloudinary.com/)

## U PROSLOM BRANCHU USPEO SAM DA LOADUJEM SVG ZA SVAKI OD PAGE-OVA, ALI NE IZGLEDA SMOOTH

PRVENSTVENO ZATO STO SAM KORISTIO `import()` INSIDE `useEffect`-OVOM CALLBACK-U, I TO NE IZGLEDA SMOOTH PRILIKOM NAVIGATINGA

**JASNO SE VIDI KAKO SE SVG LOAD-UJE, USTVARI VIDI SE JUMP KOJI SE MENI NI MALO NE SVIDJA**

## DA NE BUDE ZABUNe, TO SAM RADIO OVDE

`packages/gatsby-theme-raedal/src/components/group-page-components/heading-major.tsx`

## A KAKV MI JE PLAN SADA

PA LOAD-OVATI ICON PRILIKOM BUILD-A

DAKLE POTREBNO JE SVE URADITI U `packages/gatsby-theme-raedal/gatsby-node.js` U HOOK-U **`onCreateNode`**

A MOZDA BI TO BILO DOBRO URADITI U RESOLVERIMA ASYNC

**ALI PITANJE DA LI JA MOGU READ-OVATI FROM THE FILE, INSIDE RESOLVER**

**USTVARI JA NECU NISTA SAM RADITI U TOM POGLEDU, VEC CU KORISTITI CLOUDINARY**

# ZASTO BI JA IZMISLJAO TOPLU VODU, AKO MOGU DA KORISTIM CLODINARY

DAKEL OVO JE MESTO OD KOJEG SAM ODLUCIO DA CI KORISTITI CLOUDINARY

I PRATICU ONAJ [GUIDE IZ WORKSHOP-A](https://github.com/Rade58/intermediate-gatsby/tree/4_5_USING_THEMES_images_n_clodinary)

DAKLE SVE IMAGE ASSETE NEKA LOAD-UJE CLOUDINARY

# :one: INSTALIRANJE PAKETA KOJI CE MI TREBATI

JA ZELIM DAKLE DA CLOUDINARY KORISTIM NA NIVOU MOJE TEME, IAKO SAM PRILIKOM UCENJA GATSBY-JA TO RADIO NA NIVOU SITE-A, ALI NEMA VEZE, MISLIM DA CU MANAGE-OVATI

- `yarn workspace gatsby-theme-raedal add gatsby-transformer-cloudinary gatsby-image`

DAKLE SAMO DVA PAKETA, A TREBA MI I `gatsby-source-filesystem` KOJI IMAM OD RANIJE

# :two: PODESAVANJE ENVIROMENT VARIJABLI (MORACES OBEZBEDITI `.env.development` FAJL, STO CU TI POKAZATI)

OPET MORAM SEBE DA PODSETIM DA GATSBY DOLAZI SA .env BUILD INSIDE MA STA TO ZNACILO

`USTVARI KAKO SHVATAM, JA MOGU KROZ GATSBIJEV MODUL` KOJI SE ZOVE **dotenv** DA DEFINISEM     ODAKLE SE UZIMAJU VARIJABLE

OVO MI JE TRENUTN OSAMO BITNO

**`NODE_ENV === "development"`**

- `code packages/gatsby-theme-raedal/gatsby-config.js`

```js
// NAIME, KAKAV SE FAJL BUDE KREIRAO
// ODLUCICE STA CE SE DOLE LOADOVATI

// JA CU KASNIJE KREIRATI         .env.development      FAJL

// ADA TI JE MALO JASNIJA DOLE VREDNOST


require("dotenv").config({
  // OVDE JE POTREBNO RECI DA SE RADI O DEVELOPMENTU
  path: `.env.${process.env.NODE_ENV}`   
  // USTVARI O ONOME STA JE TRENUTNA VREDNOST NODE_ENV    VARIJABLE
  // A JA LOAD-UJEM DAKLE SAMO      DEVELOPMENT BASED    ENVIROMENT VARIJABLE

  // JER CE ONE BITI U FAJLU             .env.development

  // JER CU SAMO NJEGA KREIRATI, A DRUGE NECU KREIRATI

})

// DAKLE PREDHODNO PARCE CODE SAM STAVIO NA POCETAK (NAKON UVOZA)
// FAJLA          packages/gatsby-theme-raedal/gatsby-config.js
```

# :three: SADA CES DA KREIRAS `.env.development` FAJL, KOJI NECES COMMIT-OVATI U GIT REPO; DAKLE GITIGNORE-UJ GA ODMAH

A SADA I DA KREIRAM FAJL, DO KOJEG VODI GORE NAVEDENI PATH

- `mkdir packages/gatsby-theme-raedal/.env.development` 

- `code .gitignore`


```php
# ENVIROMENT VARIABLES
packages/gatsby-theme-raedal/.env.development

```

A U `.env.development` STAVLJM TAMO ONO STO SAM PROCITAO IZ CLOUDINARY-JA

DAKLE OVAKO NESTO

```php
# Find this at https://cloudinary.com/console/settings/account
CLOUDINARY_CLOUD_NAME=<your Cloudinary bucket name>

# Generate an API key pair at https://cloudinary.com/console/settings/security
CLOUDINARY_API_KEY=<your Cloudinary API key>
CLOUDINARY_API_SECRET=<your Cloudinary API secret>
```
JEDINO NE MOGU DA SE SETIM DA LI GORNJE VREDNOSTI IDU POD NAVODNIKE (MISLIM DA TREBAJU NAVOSNICI)

KADA SAM PREDHODNO DODAO U **`.env.development`** FAJL, MOGU DA NASTAVIM DALJE

# :four: SADA CES OPET KONFIGURIRATI `gatsby-source-filesystem`, ODNON ODODACES NOVI KONFIGURACIJSKI OBJEKAT

DAKLE TI VEC IAMS DVA FILESYSTEM CONFIG OBJEKTA, **JEDAN JE ZA BLOG POST PAGES, DRUGI ZA GROUP PAGES**

**A SLEDECI CE BITI ZA IMAGE-OVE IZ SPECIFIC FOLDER-A, KOJEG NAVEDEM**

# :five: UBACIVANJE `gatsby-transformer-cloudinary` JA U KONFIGURACIJU

**TI CES USTVARI TAKORECI KORISTITI SADA ONE VARIJABLE KOJE SU PROSLEDJENE IZ **

DAKLE DEFINISACU KONFIGURACIJSKI OBJEKAT ZA POMENUTI TRANSFORMER

STAVICU GA PRE KONFIGURACIJE FILESYSTEM-A

DAKLE OPET KODIRAM U `packages/gatsby-theme-raedal/gatsby-config.js`

- `code packages/gatsby-theme-raedal/gatsby-config.js`


```js

```

# :seven: NE MOZES DA KORISTIS PATH SKLIKA IZ TEME (MORAM OVO DA PROVERIM), VEC SAMO O NSITE LEVEL
