# DAKLE SADA ZELIM DA POSVETIM POTPUNU PAZNJU RERENDERING-U KOJI SE DOGADJA U ONIM KOMPONENTAMA, KOJE SU DEO MDX-A

***

PROBLEM SAM, RESIO KORISCENJEM `MDXProvider`-A, KROZ KOJI SAM SLAO KOMPONENTE

**UMESTO DA KORISTIM `theme-ui` I OVERIDE-UJEM NJIHOVE KOMPONENTE, JA SAM INSTALIRAO SLEDECI PAKET**

- `yarn workspace gatsby-theme-raedal add "@mdx-js/react"`

INSTALIRAO SAM I TYPESCRIPT TYPES

- `yarn -W add @types/mdx-js__react`

I ONDA SAM USTVARI KORISTIO `MDXProvidr`-A

**BITNO JE DA SAM, IZMEDJU OSTALIH STVARI, SA TIM PROVIDER-OM WRAPP-OVAO KORISCENJE `MDXRenderer`-A**

I ONO STO JE BITNO JESTE DA SAM **KOMPONENTE PROSLEDIO DIREKTNO POMENUTOM `MDXProvider`-U** 

***

BITNO:

DA IZBEGNES RERENDER (**ODNON ODA IZBEGNES UNMOUNTING TOKOM NAVIGATINGA (PA I ZA HASHED NASLOVE (ID-JEVE))**) ZA ONO STA PROSLEDJUJES KAO KOMPONENTU, KOJA CE SLUZITI KAO **`h2`** KOMPONENTA; MORAS DA IZBEGNES POZIVANJE ONE FUNKCIJE I TAKO DIREKTNO SLANJE KOMPONENTE

JER OVO (`packages/gatsby-theme-raedal/src/components/mdx-theme-ui-overrides/heading.tsx`) TI JE FACTORY FUNKCIJA

**`ISKORISTI TU FUNKCIJU DA NJENU POVRATNU VREDNOST, ODNON ODA ONO STA DOBIJES IZ NJENOG POZIVANJA, USTVARI DODELIS NEKOJ VARIJABLI`**

NA TAJ NACIN IAMCES NAMED COMPONENT I IZBECES UNMOUNTING, SA KOJIM SI IMAO PROBLEMA RANIJE

VIDI OVDE: `packages/gatsby-theme-raedal/src/components/article.tsx` **KAK OSAM TO SVE URADIO**

***

jedno podsecanje:

JEDNA KOMPONENT JE Code, I ONA SLUZI DA OVERRIDE-UJE `pre` IZ MDX-A

DRUGA KOMPONENTA JE SLUZI USTVARI DA OVERRIDE-UJE `h2`

***

***

NOVI PROBLEM

MEDJUTIM TOKOM SVEGA OVOGA INTERSECTION OBSERVER JE PRESTAO DA FUNKCIONISE

MORAM VIDETI ZASTO

**`U SUSTINI PROBLEM JE BIO STO NISAM U HEADING-OVOM useEffect-U DEFINISAO KAO DEPENDANCY ONAJ SET LOCAL STATE KOJI OWN-UJE JUMPER KOMPONENTA`**

*U SUSTINI OBSERVER NIJE MOGAO DA SE POKRENE JER SE USE EFFECT NIJE IZVRSIO KADA JE TAJ LOKALNI SET STATE POSTAO VALIDNA FUNKCIJA (UMESTO NJE POZIVAN JE ONAJ DEFAULT PROSLEDJEN IZ CONTEXT-A)*

ZATO SAM SET STATE FUNKCIJU ZADAO KAO DEPENDANCI ZA useEffect

***

***

***

TAKO DA, OVO DOLE MOZDA I NE MORAS DA CITAS JER SAM USTVARI DOLE BELEZIO PROCES KAKO SAM DOSAO DO POMENUTOG RESENJA

***

***

KOMPONENTE KORISTIM IZ OVOG

*`packages/gatsby-theme-raedal/src/components/mdx-theme-ui-overrides`*

FOLDERA

`A COMPONENT SHADOWING SE DESAVA OVDE`

**`packages/gatsby-theme-raedal/src/gatsby-plugin-theme-ui/components.ts`** (OVDE UVOZIM I KORISTIM KOMPONENTE)

# MEDJUTIM PREBACIVANJE S NASLOVA N NASLOV JE SPORO

A TO JE ZATO STO IZGLEDA DA SE KOMPONENTE, KOJE VODE POREKLO OD MDX-A, GOTOVO STALNO RERENDER-UJU

## MEMOIZATION NE FUNKCIONISE ZA OVE POTREBE

SAD NISTA MI DRUGO NE PREOSTAJE NEGO DA KACIM HANDLERE I DA NE KORISTIM Link

## ALI DA VIDIM DA LI ROUTER IMA NESTO VEZANO ZA MEMOIZATION

NEM VEZE NI SA ROUTER-OM

# **PROBLEM** JE DAKLE **`COMPONENT SHADOWING`** KOJI SE DOGADJA TOKOM DEVELOPMENTA

U PRODUCTION CODE-U NE VIDIM DA JE OVAJ SHADOWING PROBLEMATICAN, U VECOJ MERI ALI: **`I DALJE SE DOGADJA UNMOUNTING KOJI ME NERVIRA`**

# RESIO SAM PROBLEM KORISCENJEM `MDXProvider`-A